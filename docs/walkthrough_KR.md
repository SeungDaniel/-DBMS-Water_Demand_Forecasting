# ANFIS 모델 튜닝 및 시나리오 분석 결과 보고서

## 1. 모델 튜닝 결과
다음과 같은 과정을 통해 ANFIS 모델을 성공적으로 튜닝했습니다:
- **규칙 수 축소**: 10개 → 6개 (복잡도 감소로 과적합 방지)
- **규제 강화**: Weight Decay 1e-5 → 1e-3 (파라미터 안정화)
- **현실적 데이터 적용**: 코로나 소상공인 감면 가중치(23%) 적용

### 성능 비교
| 지표 | 튜닝 전 (과적합) | **튜닝 후 (최종)** |
| :--- | :--- | :--- |
| **Test R² (정확도)** | 0.57 | **0.68** (+11%p) |
| **Test RMSE (오차)** | 722만 톤 | **620만 톤** (-102만 톤) |

> [!NOTE]
> 튜닝된 모델은 새로운 데이터(2023-2024)에 대해 훨씬 더 안정적인 예측 성능을 보여줍니다.

## 2. 시나리오 분석 (스트레스 테스트)
2025년 물 수요를 예측하기 위해 다양한 요금 시나리오를 테스트했습니다.

### 결과 (직관과 다름)
| 시나리오 | 요금 변화 | 수요 변화 | 탄력성 해석 |
| :--- | :--- | :--- | :--- |
| **현상 유지** | 0% | - | - |
| **요금 인상** | +10% | **+7.8%** 🔺 | 양수 (경제학적 오류) |
| **요금 인하** | -10% | **+1.4%** 🔺 | 양수 (경제학적 오류) |

### 왜 이런 일이 발생했나?
ANFIS 모델이 **외삽(Extrapolation) 실패**를 겪었기 때문입니다:
1.  **국소적 유효성**: 퍼지 규칙은 학습 데이터 범위 내에서만 유효합니다.
2.  **범위 이탈**: 인위적으로 요금을 10% 올리자, 입력값이 학습된 범위를 벗어나면서("Grey Zone") 모델이 예측 불능 상태에 빠졌습니다.

## 3. 모델 고도화: XGBoost 도입
ANFIS의 한계를 극복하기 위해 XGBoost 모델을 도입했습니다.

### 성능 비교
| 지표 | ANFIS (튜닝됨) | **XGBoost** | 개선율 |
| :--- | :--- | :--- | :--- |
| **Test R²** | 0.68 | **0.93** | **+25%p** (압도적) |
| **Test RMSE** | 620만 톤 | **300만 톤** | **-50%** (오차 절반) |

### 그러나... (요금 민감도 문제)
XGBoost는 정확도는 높지만, 요금 변화에 대해 **0.0%의 민감도**를 보였습니다. 계절과 온도 변수가 너무 강력하여 요금 변수를 무시했기 때문입니다.

## 4. 최종 해결책: 하이브리드 모델 (Hybrid Model)
두 모델의 장점만을 결합한 **하이브리드 모델**을 구축했습니다.
1.  **회귀분석 (OLS)**: 요금 탄력성 계산 (**-0.062**, P-value 0.028)
2.  **XGBoost**: 기본 수요(Base Demand) 정밀 예측 (R² 0.93)

### 최종 시나리오 분석 결과
| 시나리오 | 요금 변화 | ANFIS | XGBoost | **하이브리드 (최종)** |
| :--- | :--- | :--- | :--- | :--- |
| **요금 인상** | +10% | +7.8% (오류) | 0.0% (무반응) | **-0.62%** (정상!) |
| **요금 인하** | -10% | +1.4% (오류) | 0.0% (무반응) | **+0.62%** (정상!) |

### 결론
- **정확성**: XGBoost의 강력한 예측 성능 유지 (R² 0.93)
- **논리성**: 경제학적 법칙(수요의 법칙) 준수
- **가치**: 운영 담당자(정확도)와 정책 입안자(인과관계) 모두를 만족시키는 최적의 솔루션 완성
